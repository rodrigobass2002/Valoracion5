<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador de APIs HTML5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .apis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .api-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .api-card h2 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            transition: transform 0.3s;
        }

        button:hover:not(:disabled) {
            transform: translateY(-2px);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        input[type="text"] {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .result {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            min-height: 50px;
            color: #333;
        }

        #myCanvas {
            width: 100%;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: block;
        }

        .canvas-card {
            grid-column: span 2;
        }

        .canvas-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .drop-zones {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .zone {
            min-height: 200px;
            padding: 1rem;
            border: 2px dashed #ccc;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .zone.dragover {
            border-color: #667eea;
            background: #e8eaf6;
        }

        .draggable {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: move;
            user-select: none;
        }

        .draggable.dragging {
            opacity: 0.5;
        }

        @media (max-width: 768px) {
            .apis-grid {
                grid-template-columns: 1fr;
            }
            
            .canvas-card {
                grid-column: span 1;
            }
            
            .drop-zones {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Explorador de APIs HTML5</h1>
            <p>Demostraciones interactivas de APIs modernas</p>
        </header>

        <div class="apis-grid">
            <!-- Geolocation API -->
            <div class="api-card">
                <h2>üìç Geolocation API</h2>
                <button id="getLocation">Obtener Mi Ubicaci√≥n</button>
                <div id="locationResult" class="result"></div>
            </div>

            <!-- LocalStorage API (usando memoria en su lugar) -->
            <div class="api-card">
                <h2>üíæ Storage API</h2>
                <input type="text" id="storageInput" placeholder="Escribe algo...">
                <button id="saveStorage">Guardar</button>
                <button id="loadStorage">Cargar</button>
                <button id="clearStorage">Limpiar</button>
                <div id="storageResult" class="result"></div>
            </div>

            <!-- Fetch API -->
            <div class="api-card">
                <h2>üåê Fetch API</h2>
                <button id="fetchData">Cargar Datos</button>
                <div id="fetchResult" class="result"></div>
            </div>

            <!-- Canvas API -->
            <div class="api-card canvas-card">
                <h2>üé® Canvas API</h2>
                <canvas id="myCanvas" width="400" height="200"></canvas>
                <div class="canvas-controls">
                    <button id="drawRect">Rect√°ngulo</button>
                    <button id="drawCircle">C√≠rculo</button>
                    <button id="clearCanvas">Limpiar</button>
                </div>
            </div>

            <!-- Drag and Drop API -->
            <div class="api-card">
                <h2>üîÑ Drag & Drop API</h2>
                <div class="drop-zones">
                    <div class="zone" id="zone1">
                        <div class="draggable" draggable="true">Item 1</div>
                        <div class="draggable" draggable="true">Item 2</div>
                        <div class="draggable" draggable="true">Item 3</div>
                    </div>
                    <div class="zone" id="zone2">
                        <p>Arrastra items aqu√≠</p>
                    </div>
                </div>
            </div>

            <!-- Notification API -->
            <div class="api-card">
                <h2>üîî Notification API</h2>
                <button id="requestNotification">Solicitar Permiso</button>
                <button id="showNotification" disabled>Mostrar Notificaci√≥n</button>
                <div id="notificationResult" class="result"></div>
            </div>
        </div>
    </div>

    <script>
        // ================================
        // STORAGE EN MEMORIA (reemplaza localStorage)
        // ================================
        const memoryStorage = {
            data: {},
            setItem: function(key, value) {
                this.data[key] = value;
            },
            getItem: function(key) {
                return this.data[key] || null;
            },
            removeItem: function(key) {
                delete this.data[key];
            }
        };

        // ================================
        // GEOLOCATION API
        // ================================
        document.getElementById('getLocation').addEventListener('click', () => {
            const result = document.getElementById('locationResult');
            
            if ('geolocation' in navigator) {
                result.innerHTML = '<p>Obteniendo ubicaci√≥n...</p>';
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        result.innerHTML = `
                            <p><strong>Latitud:</strong> ${lat.toFixed(4)}</p>
                            <p><strong>Longitud:</strong> ${lon.toFixed(4)}</p>
                            <p><strong>Precisi√≥n:</strong> ${position.coords.accuracy.toFixed(0)} metros</p>
                        `;
                    },
                    (error) => {
                        result.innerHTML = `<p style="color: #f44336;">Error: ${error.message}</p>`;
                    }
                );
            } else {
                result.innerHTML = '<p>Geolocation no soportado</p>';
            }
        });

        // ================================
        // STORAGE API (usando memoria)
        // ================================
        const storageInput = document.getElementById('storageInput');
        const storageResult = document.getElementById('storageResult');

        document.getElementById('saveStorage').addEventListener('click', () => {
            const value = storageInput.value;
            if (value) {
                memoryStorage.setItem('userInput', value);
                memoryStorage.setItem('timestamp', new Date().toLocaleString());
                storageResult.innerHTML = '<p style="color: #4caf50;">‚úì Guardado exitosamente</p>';
            }
        });

        document.getElementById('loadStorage').addEventListener('click', () => {
            const saved = memoryStorage.getItem('userInput');
            const timestamp = memoryStorage.getItem('timestamp');
            
            if (saved) {
                storageInput.value = saved;
                storageResult.innerHTML = `<p><strong>√öltimo guardado:</strong> ${timestamp}</p>`;
            } else {
                storageResult.innerHTML = '<p>No hay datos guardados</p>';
            }
        });

        document.getElementById('clearStorage').addEventListener('click', () => {
            memoryStorage.removeItem('userInput');
            memoryStorage.removeItem('timestamp');
            storageInput.value = '';
            storageResult.innerHTML = '<p>Storage limpiado</p>';
        });

        // ================================
        // FETCH API
        // ================================
        document.getElementById('fetchData').addEventListener('click', async () => {
            const result = document.getElementById('fetchResult');
            result.innerHTML = '<p>Cargando datos...</p>';
            
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
                const data = await response.json();
                
                result.innerHTML = `
                    <p><strong>Nombre:</strong> ${data.name}</p>
                    <p><strong>Email:</strong> ${data.email}</p>
                    <p><strong>Ciudad:</strong> ${data.address.city}</p>
                    <p><strong>Empresa:</strong> ${data.company.name}</p>
                `;
            } catch (error) {
                result.innerHTML = `<p style="color: #f44336;">Error: ${error.message}</p>`;
            }
        });

        // ================================
        // CANVAS API
        // ================================
        const canvas = document.getElementById('myCanvas');
        const ctx = canvas.getContext('2d');

        document.getElementById('drawRect').addEventListener('click', () => {
            const x = Math.random() * (canvas.width - 100);
            const y = Math.random() * (canvas.height - 100);
            const width = 50 + Math.random() * 50;
            const height = 50 + Math.random() * 50;
            
            ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 50%)`;
            ctx.fillRect(x, y, width, height);
        });

        document.getElementById('drawCircle').addEventListener('click', () => {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const radius = 20 + Math.random() * 30;
            
            ctx.fillStyle = `hsl(${Math.random() * 360}, 70%, 50%)`;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
        });

        document.getElementById('clearCanvas').addEventListener('click', () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });

        // ================================
        // DRAG AND DROP API
        // ================================
        const draggables = document.querySelectorAll('.draggable');
        const zones = document.querySelectorAll('.zone');

        draggables.forEach(draggable => {
            draggable.addEventListener('dragstart', () => {
                draggable.classList.add('dragging');
            });
            
            draggable.addEventListener('dragend', () => {
                draggable.classList.remove('dragging');
            });
        });

        zones.forEach(zone => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
                zone.classList.add('dragover');
            });
            
            zone.addEventListener('dragleave', () => {
                zone.classList.remove('dragover');
            });
            
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                zone.classList.remove('dragover');
                
                const dragging = document.querySelector('.dragging');
                if (dragging) {
                    zone.appendChild(dragging);
                }
            });
        });

        // ================================
        // NOTIFICATION API
        // ================================
        const requestBtn = document.getElementById('requestNotification');
        const showBtn = document.getElementById('showNotification');
        const notifResult = document.getElementById('notificationResult');

        requestBtn.addEventListener('click', async () => {
            if ('Notification' in window) {
                const permission = await Notification.requestPermission();
                
                if (permission === 'granted') {
                    showBtn.disabled = false;
                    notifResult.innerHTML = '<p style="color: #4caf50;">‚úì Permiso concedido</p>';
                } else {
                    notifResult.innerHTML = '<p style="color: #f44336;">Permiso denegado</p>';
                }
            } else {
                notifResult.innerHTML = '<p>Notifications no soportadas</p>';
            }
        });

        showBtn.addEventListener('click', () => {
            new Notification('¬°Hola desde HTML5!', {
                body: 'Esta es una notificaci√≥n de prueba',
                icon: 'https://cdn-icons-png.flaticon.com/512/561/561127.png'
            });
        });

        // Cargar datos al inicio
        window.addEventListener('load', () => {
            const saved = memoryStorage.getItem('userInput');
            if (saved) {
                storageInput.value = saved;
            }
        });
    </script>
</body>
</html>